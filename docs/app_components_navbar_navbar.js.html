<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: app/components/navbar/navbar.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: app/components/navbar/navbar.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useState } from 'react';
import { useRouter } from 'next/router';
import { useRole } from '../../context/roleProvider';
import AirIcon from '@mui/icons-material/Air';
import WbSunnyIcon from '@mui/icons-material/WbSunny';
import CloudIcon from '@mui/icons-material/Cloud';
import ThunderstormIcon from '@mui/icons-material/Thunderstorm';
import AcUnitIcon from '@mui/icons-material/AcUnit';
import Image from 'next/image';
import styles from './navbar.module.css';

/**
 * Navbar Component
 * 
 * @author Alonso Peralta Espinoza
 *
 * @description
 * A navigation bar displaying the current time, weather information, and navigation buttons for switching views or logging out.
 *
 * @features
 * - Displays current time and updates every minute.
 * - Fetches and displays weather data using the `wttr.in` API.
 * - Provides buttons for switching views and logging out.
 * - Dynamically adjusts visibility of buttons based on the user's role and page.
 *
 * @state
 * - `time`: Stores the current time.
 * - `weather`: Stores temperature and condition from the weather API.
 *
 * @methods
 * - `updateTime`: Updates the `time` state every minute.
 * - `fetchWeather`: Fetches weather data and updates the `weather` state.
 * - `getWeatherIcon`: Maps weather conditions to corresponding icons.
 * - `handleLogoff`: Clears the user's role and redirects to the login page.
 * - `toggleView`: Switches between manager, cashier, kitchen, and kitchen TV views.
 *
 * @example
 * &lt;Navbar />
 */

const Navbar = () => {
    const { role, setRole } = useRole();
    const [time, setTime] = useState("");
    const [weather, setWeather] = useState({ temp: null, condition: null });
    const router = useRouter();

    useEffect(() => {
        const updateTime = () => {
            const now = new Date();
            setTime(now.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }));
        };
        updateTime();
        const timer = setInterval(updateTime, 60000); // Update every minute
        return () => clearInterval(timer);
    }, []);

    useEffect(() => {
        const fetchWeather = async () => {
            try {
                const response = await fetch("https://wttr.in/College+Station?format=%t+%C");
                const data = await response.text();
                
                const match = data.match(/([+-]?\d+Â°[CF])\s+(.+)/);
                
                if (match) {
                    const temp = match[1].replace("+", "");
                    const condition = match[2];
                    setWeather({ temp, condition });
                } else {
                    console.error("Unexpected weather data format:", data);
                }
            } catch (error) {
                console.error("Error fetching weather data:", error);
            }
        };
        fetchWeather();
    }, []);
    

    const getWeatherIcon = (condition) => {
        if (condition.includes("Sunny") || condition.includes("Clear")) return &lt;WbSunnyIcon />;
        if (condition.includes("Partly cloudy")) return &lt;CloudIcon />;
        if (condition.includes("Cloudy") || condition.includes("Overcast")) return &lt;CloudIcon />;
        if (condition.includes("Rain") || condition.includes("Showers") || condition.includes("rain")) return &lt;ThunderstormIcon />;
        if (condition.includes("Thunderstorm") || condition.includes("Thunder")) return &lt;ThunderstormIcon />;
        if (condition.includes("Snow")) return &lt;AcUnitIcon />;
        if (condition.includes("Windy") || condition.includes("Breezy")) return &lt;AirIcon />;
        if (condition.includes("Fog") || condition.includes("Mist") || condition.includes("Haze")) return &lt;CloudIcon />;
        return null;
    };

    const handleLogoff = () => {
        setRole(null);
        localStorage.removeItem('role');
        router.push('/login-oauth');
    };

    const toggleView = () => {
        if (router.pathname === '/manager') {
            router.push('/cashier');
        } else if (router.pathname === '/kitchen') {
            router.push('/kitchenTV');
        } else if (router.pathname === '/kitchenTV') {
            router.push('/kitchen');
        } else {
            router.push('/manager');
        }
    };

    return (
        &lt;div className={styles.mainContainer}>
            {/* Logoff Button */}
            &lt;button
                className={`${styles.logoffButton} ${
                (role &amp;&amp; router.pathname !== '/kiosk') || router.pathname === '/landing' ? styles.visible : ''
                }`}
                onClick={() => {
                if (router.pathname === '/landing') {
                    router.push('/login-oauth');
                } else {
                    router.push('/landing');
                }
                }}
                aria-label={router.pathname === '/landing' ? 'Log Out' : 'Back'}
            >
                {router.pathname === '/landing' ? 'Log Out' : 'Back'}
            &lt;/button>

            {/* Switch View Button */}
            &lt;button
                className={`${styles.pageButton} ${
                    (role === 'manager' || router.pathname === '/kitchen' || router.pathname === '/kitchenTV') &amp;&amp; router.pathname !== '/kiosk' &amp;&amp; router.pathname !== '/menu' &amp;&amp; router.pathname !== '/landing'
                        ? styles.visible
                        : ''
                }`}
                onClick={toggleView}
            >
                Switch View
            &lt;/button>

            &lt;h1 className={styles.title}>WELCOME TO PANDA EXPRESS&lt;/h1>

            &lt;div className={styles.detailsBox}>
                &lt;div className={styles.timestamp}>{time}&lt;/div>
                {weather.temp &amp;&amp; weather.condition &amp;&amp; (
                    &lt;div className={styles.weatherBox}>
                        &lt;div className={styles.weatherIcon}>{getWeatherIcon(weather.condition)}&lt;/div>
                        &lt;div className={styles.weatherTemp}>{weather.temp}&lt;/div>
                    &lt;/div>
                )}
                &lt;Image 
                    className={styles.logo} 
                    src='/chickenmaxxing_logo.png' 
                    alt="Chicken Maxxing Logo" 
                    width={100}
                    height={50} 
                />
            &lt;/div>
        &lt;/div>
    );
};

export default Navbar;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#AccessibilityButton">AccessibilityButton</a></li><li><a href="global.html#AddEmployeeForm">AddEmployeeForm</a></li><li><a href="global.html#AddMenuModal">AddMenuModal</a></li><li><a href="global.html#AiAgent">AiAgent</a></li><li><a href="global.html#BottomBar">BottomBar</a></li><li><a href="global.html#BottomPanel">BottomPanel</a></li><li><a href="global.html#ButtonGrid">ButtonGrid</a></li><li><a href="global.html#CartPage">CartPage</a></li><li><a href="global.html#CashierPage">CashierPage</a></li><li><a href="global.html#Customer">Customer</a></li><li><a href="global.html#CustomerLogIn">CustomerLogIn</a></li><li><a href="global.html#CustomerPointsModal">CustomerPointsModal</a></li><li><a href="global.html#CustomerSignUp">CustomerSignUp</a></li><li><a href="global.html#DropDowns">DropDowns</a></li><li><a href="global.html#EditEmployeeModal">EditEmployeeModal</a></li><li><a href="global.html#EmployeeIdModal">EmployeeIdModal</a></li><li><a href="global.html#EmployeeViewerModal">EmployeeViewerModal</a></li><li><a href="global.html#GlobalStateProvider">GlobalStateProvider</a></li><li><a href="global.html#InventoryTable">InventoryTable</a></li><li><a href="global.html#ItemFrame">ItemFrame</a></li><li><a href="global.html#KioskALaCartePage">KioskALaCartePage</a></li><li><a href="global.html#KioskBiggerPlatePage">KioskBiggerPlatePage</a></li><li><a href="global.html#KioskBowlPage">KioskBowlPage</a></li><li><a href="global.html#KioskItemPage">KioskItemPage</a></li><li><a href="global.html#KioskItemPanel">KioskItemPanel</a></li><li><a href="global.html#KioskPage">KioskPage</a></li><li><a href="global.html#KioskPlatePage">KioskPlatePage</a></li><li><a href="global.html#KitchenPage">KitchenPage</a></li><li><a href="global.html#KitchenTV">KitchenTV</a></li><li><a href="global.html#Landing">Landing</a></li><li><a href="global.html#Loading">Loading</a></li><li><a href="global.html#LoginOAuth">LoginOAuth</a></li><li><a href="global.html#Manager">Manager</a></li><li><a href="global.html#ManagerProfile">ManagerProfile</a></li><li><a href="global.html#Menu">Menu</a></li><li><a href="global.html#Navbar">Navbar</a></li><li><a href="global.html#OrderPanel">OrderPanel</a></li><li><a href="global.html#RecommendationPanel">RecommendationPanel</a></li><li><a href="global.html#ResetPassword">ResetPassword</a></li><li><a href="global.html#ResetSalesDataModal">ResetSalesDataModal</a></li><li><a href="global.html#RestockReportModal">RestockReportModal</a></li><li><a href="global.html#RoleProvider">RoleProvider</a></li><li><a href="global.html#SalesChart">SalesChart</a></li><li><a href="global.html#SalesReportModal">SalesReportModal</a></li><li><a href="global.html#SignOAuth">SignOAuth</a></li><li><a href="global.html#ThankYouPage">ThankYouPage</a></li><li><a href="global.html#TopBar">TopBar</a></li><li><a href="global.html#UpdateInventoryItemModal">UpdateInventoryItemModal</a></li><li><a href="global.html#VerifyEmail">VerifyEmail</a></li><li><a href="global.html#Welcome">Welcome</a></li><li><a href="global.html#XReportModal">XReportModal</a></li><li><a href="global.html#ZReportModal">ZReportModal</a></li><li><a href="global.html#generateToken">generateToken</a></li><li><a href="global.html#translateAllText">translateAllText</a></li><li><a href="global.html#translateAllText-TranslatesanarrayoftextsintothetargetlanguageusingGoogleTranslateAPI.">translateAllText - Translates an array of texts into the target language using Google Translate API.</a></li><li><a href="global.html#useTranslate">useTranslate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Dec 04 2024 18:07:20 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
