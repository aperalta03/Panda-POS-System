<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/itemFrameALaCarte.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/itemFrameALaCarte.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from "react";
import { useGlobalState } from "../app/context/GlobalStateContext"; //import global state
import styles from "./itemFrameALaCarte.module.css";

/**
 * @author: Uzair Khan
 * Component representing a single menu item: handles incrementation and decrementation
 *
 * Renders an image, name, calories, and buttons to add/remove an item from the cart by making an item frame.
 *
 * @param {object} item - The menu item to render.
 * @param {boolean} isDone - Whether the entree selection is done.
 * @returns {ItemFrame} - Item Frame for a menu item
 */
const ItemFrame = ({ item, isDone }) => {
  const {
    menu,
    setMenu,
    numTrackedSides,
    setNumTrackedSides,
    numTrackedEntrees,
    setNumTrackedEntrees,
    setNumTrackedOthers,
    numTrackedOthers,
    priceMap,
    translations,
    cart,
    newItem,
    setNewItem,
    removeNewItem,
    setCart,
    addItemToCart,
    removeItemFromCart,
    clearCart,
  } = useGlobalState();

  const [showDescription, setShowDescription] = useState(false); //var to show description of an item

/**
 * Handles incrementing the quantity of an item in an order and adding it to the cart.
 * Updates the cart, menu, and item details based on the item type.
 * 
 * @author Uzair Khan
 * @throws Will throw an error if `menu` or `item` is undefined or null.
 * @throws Will throw an error if `addItemToCart` or `setMenu` is not a function.
 * @returns {void}
 */
  const handleIncrement = () => {
    if (isDone &amp;&amp; item.type === 'entree') return;
    if (newItem === 0) {
      addItemToCart({
        id: Date.now(),
        type: "NEW ITEM",
        price: 0.0,
        details: [],
        quantity: 1,
        checkout: []
      });
    }
    const updatedMenu = menu.map((menuItem) => {
      if (menuItem.name === item.name) {
        const incrementAmount = item.type === "side" ? 0.5 : 1;
        const updatedItem = {
          ...menuItem,
          count: menuItem.count + incrementAmount,
        };

        if (item.type === "side") {
          setNumTrackedSides(numTrackedSides + 0.5);
          newItem.details = [...newItem.details, "0.5 " + item.name + " $" + item.price];
        } 
        else if (item.type === 'entree') {
          setNumTrackedEntrees(numTrackedEntrees + 1);
          newItem.details = [...newItem.details, "1 " + item.name + " $" + item.price];
        }
        else if (item.type === 'appetizer' || 'drink' || 'dessert') {
          setNumTrackedOthers(numTrackedOthers + 1);
          newItem.details = [...newItem.details, "1 " + item.name + " $" + item.price];

        }
        newItem.price += item.price;
        newItem.checkout.push(item.name);

        return updatedItem;
      }
      return menuItem;
    });
    setMenu(updatedMenu);
  };

/**
 * Handles decrementing the quantity of an item in an order and subtracting it from the cart.
 * Updates the cart, menu, and item details based on the item type.
 * 
 * @author Uzair Khan
 * @throws Will throw an error if `menu` or `item` is undefined or null.
 * @throws Will throw an error if `setMenu` is not a function.
 * @returns {void}
 */
  const handleDecrement = () => {
    const updatedMenu = menu.map((menuItem) => {
      if (menuItem.name === item.name &amp;&amp; menuItem.count > 0) {
        const decrementAmount = item.type === "side" ? 0.5 : 1;
        const updatedItem = {
          ...menuItem,
          count: menuItem.count - decrementAmount,
        };

        if (item.type === "side" &amp;&amp; numTrackedSides > 0) {
          setNumTrackedSides(numTrackedSides - 0.5);
        } else if (item.type === "entree" &amp;&amp; numTrackedEntrees > 0) {
          setNumTrackedEntrees(numTrackedEntrees - 1);
        } else if (item.type ===  "appetizer" || "drink" || "dessert" &amp;&amp; numTrackedOthers > 0) {
          setNumTrackedOthers(numTrackedOthers - 1);
        }

        //remove from cart
        newItem.details.pop();
        newItem.checkout.pop();
        newItem.price -= item.price;

        return updatedItem;
      }
      return menuItem;
    });
    setMenu(updatedMenu);
  };

/**
 * Toggles the description modal for an item.
 * Opens or closes the modal based on its current state.
 * 
 * @author Uzair Khan
 * @throws Will throw an error if `setShowDescription` is not a function.
 * @returns {void}
 */
  const toggleDescription = () => {
    setShowDescription(!showDescription);
  };

/**
 * Returns the corresponding Material-UI icon for a given designation.
 * 
 * @author Uzair Khan
 * @param {string} designation - The designation of the menu item.
 * @throws Will throw an error if `designation` is not a string.
 * @returns {JSX.Element|null} The corresponding icon or `null` if no match is found.
 */
  const getDesignationIcon = (designation) => {
    console.log(designation);
    switch (designation) {
      case "Premium":
        return "P";
      case "Spicy":
        return "S";
      case "Veggie":
        return "V";
      case "Seasonal":
        return "L";
      case "Default":
        return "D";
      default:
        return null;
    }
  };

  // Ensure item and designation are defined
  if (!item || !item.designation) {
    console.warn("Item or designation is undefined:", item);
    return null; // Or a default placeholder
  }

  const designationIcon = item.designation
    ? getDesignationIcon(item.designation)
    : null;
  const designationClass = item.designation
    ? `${styles[item.designation.toLowerCase() + "designation"]}`
    : "";

  const price = priceMap[item.name];

  return (
    &lt;div className={`${styles.itemFrame}`}>
      &lt;img src={item.image} alt={item.name} className={styles.itemImage} />
      &lt;h3 className={styles.name}>{translations[item.name] || item.name}&lt;/h3>
      &lt;p className={styles.calories}>
        {item.calories} {translations["Calories"] || "Cal."}
      &lt;/p>
      {price &amp;&amp; &lt;p className={styles.price}>${price.toFixed(2)}&lt;/p>}{" "}
      {/* Display the price with 2 decimal points */}
      &lt;div className={styles.infoButtonContainer}>
        {designationIcon &amp;&amp; (
          &lt;div className={`${styles.designationIcon} ${designationClass}`}>
            {designationIcon}
          &lt;/div>
        )}
        &lt;button onClick={toggleDescription} className={styles.infoButton}>
          i
        &lt;/button>
      &lt;/div>
      {showDescription &amp;&amp; (
        &lt;div className={styles.popup}>
          &lt;div className={styles.popupContent}>
            &lt;p>{translations[item.description] || item.description}&lt;/p>
            &lt;p>
              &lt;span className={styles.designationLabel}>
                {translations["Designation:"] || "Designation:"}
              &lt;/span>{" "}
              {item.designation
                ? translations[item.designation] || item.designation
                : translations["No specific designation"] ||
                  "No specific designation"}
            &lt;/p>
            &lt;button onClick={toggleDescription} className={styles.closeButton}>
              {translations["Close"] || "Close"}
            &lt;/button>
          &lt;/div>
        &lt;/div>
      )}
      &lt;div className={styles.counterContainer}>
        &lt;button className={styles.addSub} onClick={handleDecrement}>
          -
        &lt;/button>
        &lt;span>{item.count}&lt;/span>
        &lt;button
          className={styles.addSub}
          onClick={handleIncrement}
          disabled={item.type === "entree" &amp;&amp; isDone}
        >
          +
        &lt;/button>
      &lt;/div>
    &lt;/div>
  );
};

export default ItemFrame;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-api_add-employee.html">api/add-employee</a></li><li><a href="module-api_cashier-getMenu.html">api/cashier-getMenu</a></li><li><a href="module-api_customerLogin.html">api/customerLogin</a></li><li><a href="module-api_customerSignUp.html">api/customerSignUp</a></li><li><a href="module-api_deleteItem.html">api/deleteItem</a></li><li><a href="module-api_deleteSale.html">api/deleteSale</a></li><li><a href="module-api_employee-viewer.html">api/employee-viewer</a></li><li><a href="module-api_fortune-ai.html">api/fortune-ai</a></li><li><a href="module-api_generate-z-report.html">api/generate-z-report</a></li><li><a href="module-api_get-employee-info.html">api/get-employee-info</a></li><li><a href="module-api_inventory-table.html">api/inventory-table</a></li><li><a href="module-api_items.html">api/items</a></li><li><a href="module-api_kitchen-cancel-order.html">api/kitchen-cancel-order</a></li><li><a href="module-api_kitchen-get-orders.html">api/kitchen-get-orders</a></li><li><a href="module-api_kitchen-remove-sale.html">api/kitchen-remove-sale</a></li><li><a href="module-api_kitchen-update-order-status.html">api/kitchen-update-order-status</a></li><li><a href="module-api_login-info.html">api/login-info</a></li><li><a href="module-api_menu-get-items.html">api/menu-get-items</a></li><li><a href="module-api_oauth.html">api/oauth</a></li><li><a href="module-api_reset-salesRecord.html">api/reset-salesRecord</a></li><li><a href="module-api_restock-Report-inventory.html">api/restock-Report-inventory</a></li><li><a href="module-api_resyncIds.html">api/resyncIds</a></li><li><a href="module-api_sales-chart.html">api/sales-chart</a></li><li><a href="module-api_sales-report.html">api/sales-report</a></li><li><a href="module-api_toggle-employee.html">api/toggle-employee</a></li><li><a href="module-api_top-selling-item.html">api/top-selling-item</a></li><li><a href="module-api_update-employee.html">api/update-employee</a></li><li><a href="module-api_update-inventory-item.html">api/update-inventory-item</a></li><li><a href="module-api_updateCustomerPoints.html">api/updateCustomerPoints</a></li><li><a href="module-api_updateIngredient.html">api/updateIngredient</a></li><li><a href="module-api_updateMenuItem.html">api/updateMenuItem</a></li><li><a href="module-api_updateSalesRecord.html">api/updateSalesRecord</a></li><li><a href="module-api_updateSeasonalItem.html">api/updateSeasonalItem</a></li><li><a href="module-api_x-report.html">api/x-report</a></li><li><a href="module-api_z-report.html">api/z-report</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AccessibilityButton">AccessibilityButton</a></li><li><a href="global.html#AddEmployeeForm">AddEmployeeForm</a></li><li><a href="global.html#AddMenuModal">AddMenuModal</a></li><li><a href="global.html#AiAgent">AiAgent</a></li><li><a href="global.html#BottomBar">BottomBar</a></li><li><a href="global.html#BottomPanel">BottomPanel</a></li><li><a href="global.html#ButtonGrid">ButtonGrid</a></li><li><a href="global.html#CartPage">CartPage</a></li><li><a href="global.html#CashierPage">CashierPage</a></li><li><a href="global.html#Customer">Customer</a></li><li><a href="global.html#CustomerLogIn">CustomerLogIn</a></li><li><a href="global.html#CustomerPointsModal">CustomerPointsModal</a></li><li><a href="global.html#CustomerSignUp">CustomerSignUp</a></li><li><a href="global.html#DropDowns">DropDowns</a></li><li><a href="global.html#EditEmployeeModal">EditEmployeeModal</a></li><li><a href="global.html#EmployeeIdModal">EmployeeIdModal</a></li><li><a href="global.html#EmployeeViewerModal">EmployeeViewerModal</a></li><li><a href="global.html#GlobalStateProvider">GlobalStateProvider</a></li><li><a href="global.html#InventoryTable">InventoryTable</a></li><li><a href="global.html#ItemFrame">ItemFrame</a></li><li><a href="global.html#KioskALaCartePage">KioskALaCartePage</a></li><li><a href="global.html#KioskBiggerPlatePage">KioskBiggerPlatePage</a></li><li><a href="global.html#KioskBowlPage">KioskBowlPage</a></li><li><a href="global.html#KioskItemPage">KioskItemPage</a></li><li><a href="global.html#KioskItemPanel">KioskItemPanel</a></li><li><a href="global.html#KioskPage">KioskPage</a></li><li><a href="global.html#KioskPlatePage">KioskPlatePage</a></li><li><a href="global.html#KitchenPage">KitchenPage</a></li><li><a href="global.html#KitchenTV">KitchenTV</a></li><li><a href="global.html#Landing">Landing</a></li><li><a href="global.html#Loading">Loading</a></li><li><a href="global.html#LoginOAuth">LoginOAuth</a></li><li><a href="global.html#Manager">Manager</a></li><li><a href="global.html#ManagerProfile">ManagerProfile</a></li><li><a href="global.html#Menu">Menu</a></li><li><a href="global.html#Navbar">Navbar</a></li><li><a href="global.html#OrderPanel">OrderPanel</a></li><li><a href="global.html#RecommendationPanel">RecommendationPanel</a></li><li><a href="global.html#ResetPassword">ResetPassword</a></li><li><a href="global.html#ResetSalesDataModal">ResetSalesDataModal</a></li><li><a href="global.html#RestockReportModal">RestockReportModal</a></li><li><a href="global.html#RoleProvider">RoleProvider</a></li><li><a href="global.html#SalesChart">SalesChart</a></li><li><a href="global.html#SalesReportModal">SalesReportModal</a></li><li><a href="global.html#SignOAuth">SignOAuth</a></li><li><a href="global.html#ThankYouPage">ThankYouPage</a></li><li><a href="global.html#TopBar">TopBar</a></li><li><a href="global.html#UpdateInventoryItemModal">UpdateInventoryItemModal</a></li><li><a href="global.html#VerifyEmail">VerifyEmail</a></li><li><a href="global.html#Welcome">Welcome</a></li><li><a href="global.html#XReportModal">XReportModal</a></li><li><a href="global.html#ZReportModal">ZReportModal</a></li><li><a href="global.html#handleTextToSpeech">handleTextToSpeech</a></li><li><a href="global.html#handler">handler</a></li><li><a href="global.html#translateAllText">translateAllText</a></li><li><a href="global.html#translateAllText-TranslatesanarrayoftextsintothetargetlanguageusingGoogleTranslateAPI.">translateAllText - Translates an array of texts into the target language using Google Translate API.</a></li><li><a href="global.html#useTranslate">useTranslate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Dec 05 2024 00:37:38 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
